<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>用状态机处理 abababx</title>
</head>
<body>

  <script>


    function start(c){
      if(c === "a")
        return foundA;
      else 
        return start
    }

    function foundA(c){
      if(c === "b")
        return foundB;
      else 
        return start(c)
    }
    function foundB(c){
      if(c === "a")
        return foundA2;
      else 
        return start(c)
    }
    function foundA2(c){
      if(c === "b")
        return foundB2;
      else 
        return foundA(c)
    }
    function foundB2(c){
      if(c === "a")
        return foundA3;
      else 
        return foundB(c)
    }
    function foundA3(c){
      if(c === "b")
        return foundB3;
      else 
        return foundA2(c)
    }
    function foundB3(c){
      if(c === "x")
        return end;
      else 
        return foundB2(c)
    }
    
    function end(c){
      return true
    }

    function find(str){
      let state = start;
      for(let c of str){
        state = state(c);
        if(state === true)
          break;
      }
      return state === end

    }


    console.log(find("abababababababx")); // true
    console.log(find("abcabababx")); // true
    console.log(find("ababxababx")); // false

  </script>
  
</body>
</html>